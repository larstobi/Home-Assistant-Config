- id: '16'
  alias: 'Verisure armed_away to Home armed_away'
  trigger:
    platform: numeric_state
    entity_id: sensor.verisure_status_plug_power
    above: 1.0
  condition:
    condition: template
    value_template: "{{not is_state('alarm_control_panel.home_alarm','armed_away')}}"
  action:
    - service: alarm_control_panel.alarm_arm_away
      entity_id: alarm_control_panel.home_alarm
      data:
        code: !secret alarm_control_panel_code

- id: '17'
  alias: 'Home armed_away to Verisure armed_away'
  trigger:
    platform: state
    entity_id: alarm_control_panel.home_alarm
    to: 'armed_away'
  condition:
    condition: template
    value_template: "{{not is_state('alarm_control_panel.holmsens_vei_alarm','armed_away')}}"
  action:
    - service: alarm_control_panel.alarm_arm_away
      entity_id: alarm_control_panel.holmsens_vei_alarm
      data:
        code: !secret verisure_code

- id: '18'
  alias: 'Home armed_home to Verisure armed_home'
  trigger:
    platform: state
    entity_id: alarm_control_panel.home_alarm
    to: 'armed_home'
  condition:
    - condition: template
      value_template: "{{not is_state('alarm_control_panel.holmsens_vei_alarm','armed_home')}}"
  action:
    - service: alarm_control_panel.alarm_arm_home
      entity_id: alarm_control_panel.holmsens_vei_alarm
      data:
        code: !secret verisure_code

- id: '21'
  alias: 'Verisure disarmed to Home disarmed'
  trigger:
    platform: numeric_state
    entity_id: sensor.verisure_status_plug_power
    below: 1.0
  condition:
    condition: and
    conditions:
      - condition: template
        value_template: "{{not is_state('alarm_control_panel.home_alarm','disarmed')}}"
      - condition: template
        value_template: "{{not is_state('alarm_control_panel.home_alarm','disarming')}}"
  action:
    - service: alarm_control_panel.alarm_disarm
      entity_id: alarm_control_panel.home_alarm
      data:
        code: !secret alarm_control_panel_code

- id: '22'
  alias: 'Home disarmed from armed_away to Verisure disarmed'
  trigger:
    platform: state
    entity_id: alarm_control_panel.home_alarm
    from: 'armed_away'
    to: 'disarmed'
  condition:
    condition: and
    conditions:
      - condition: template
        value_template: "{{not is_state('alarm_control_panel.holmsens_vei_alarm','disarmed')}}"
      - condition: numeric_state
        entity_id: sensor.verisure_status_plug_power
        above: 1.0
  action:
    - service: alarm_control_panel.alarm_disarm
      entity_id: alarm_control_panel.holmsens_vei_alarm
      data:
        code: !secret verisure_code

- id: '11'
  alias: 'Home disarmed from armed_home to Verisure disarmed'
  trigger:
    platform: state
    entity_id: alarm_control_panel.home_alarm
    from: 'armed_home'
    to: 'disarmed'
  condition:
    condition: template
    value_template: "{{not is_state('alarm_control_panel.holmsens_vei_alarm','disarmed')}}"
  action:
    - service: alarm_control_panel.alarm_disarm
      entity_id: alarm_control_panel.holmsens_vei_alarm
      data:
        code: !secret verisure_code

