- id: '53'    
  alias: 'Dining room on'
  trigger:
    - platform: state
      entity_id: input_select.time_of_day
    - platform: state
      entity_id: input_select.home_state
      to: 'Home'
    - platform: numeric_state
      entity_id: sensor.dining_room_motion_sensor_luminance
      below: 200
      for:
        seconds: 120
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: input_select.home_state
        state: 'Home'
      - condition: numeric_state
        entity_id: sensor.dining_room_motion_sensor_luminance
        below: 200
  action:
    - service: switch.turn_on
      entity_id: switch.dining_room_standing_lamp_switch, switch.corner_standing_lamp_switch, switch.cabinet_lights_switch, switch.serving_table_lamp_switch, switch.office_standing_lamp_switch, switch.side_table_light_switch
    - service: light.turn_on
      entity_id: light.dining_room_rail_1_level, light.dining_room_rail_2_level
      data_template:
        brightness_pct: >
          {%- if is_state('input_select.time_of_day', 'Morning') %}
            49
          {%- elif is_state('input_select.time_of_day', 'Day') %}
            50
          {%- elif is_state('input_select.time_of_day', 'Evening') %}
            15
          {%- else %}
            5
          {%- endif %}


- id: '54'    
  alias: 'Dining room off'
  trigger:
    - platform: state
      entity_id: input_select.time_of_day
      to: 'Night'
    - platform: state
      entity_id: input_select.home_state
      to: 'Away'
    - platform: numeric_state
      entity_id: sensor.dining_room_motion_sensor_luminance
      above: 250
      for:
        seconds: 120
  action:
    - service: switch.turn_off
      entity_id: switch.dining_room_standing_lamp_switch, switch.corner_standing_lamp_switch, switch.cabinet_lights_switch, switch.serving_table_lamp_switch, switch.office_standing_lamp_switch, switch.side_table_light_switch
    - service: light.turn_off
      entity_id: light.dining_room_rail_1_level, light.dining_room_rail_2_level
