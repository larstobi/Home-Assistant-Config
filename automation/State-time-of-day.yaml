###
# Control Time of Day
###
- id: '7'
  alias: 'Set Time of Day to Morning'
  trigger:
    - platform: state
      entity_id: input_boolean.sleep_state_tor, input_boolean.sleep_state_lande, input_boolean.sleep_state_ingrid, input_boolean.sleep_state_guests
      to: 'off'
    - platform: time
      at: '08:45:00'   
  condition:
    condition: state
    entity_id: input_select.time_of_day
    state: 'Night'
  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.time_of_day
        option: Morning

- id: '8'
  alias: 'Set Time of Day to Day'
  trigger:
    - platform: time
      at: '09:00:00'   
  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.time_of_day
        option: Day

- id: '9'
  alias: 'Set Time of Day to Evening'
  trigger:
    - platform: time
      at: '20:00:00'
  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.time_of_day
        option: Evening

- id: '10'
  alias: 'Set Time of Day to Night'
  trigger:
    - platform: state
      entity_id: input_boolean.sleep_state_tor, input_boolean.sleep_state_lande, input_boolean.sleep_state_ingrid, input_boolean.sleep_state_guests
      to: 'on'
    - platform: time
      at: '23:00:00'
  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: input_select.home_state
        state: 'Away'
      - condition: and
        conditions:
          - condition: state
            entity_id: input_boolean.sleep_state_tor
            state: 'on'
          - condition: state
            entity_id: input_boolean.sleep_state_lande
            state: 'on'
          - condition: state
            entity_id: input_boolean.sleep_state_ingrid
            state: 'on'
          - condition: template
            value_template: '{{(is_state("input_boolean.guests_present", "on") and is_state("input_boolean.sleep_state_guests", "on")) or is_state("input_boolean.guests_present","off")}}'
  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.time_of_day
        option: Night
