- id: '40'    
  alias: 'Master bedroom morning'
  trigger:
    - platform: state
      entity_id: input_select.time_of_day
      to: 'Morning'
    - platform: state
      entity_id: input_select.home_state
      to: 'Home'
  condition:
    condition: state
    entity_id: input_select.home_state
    state: 'Home'
  action:
    - service: light.turn_on
      entity_id: light.bedside_lamp_dimmer_level
      data:
        brightness: 150
    - service: light.turn_on
      entity_id: light.bedroom_tv_backlight_level
      data:
        brightness: 255
        rgb_color: [211,221,247]
    - service: switch.turn_on
      entity_id: switch.dressing_table_light_switch
    - service: switch.turn_on
      entity_id: switch.dressing_room_wardrobes_switch
    - service: light.turn_on
      entity_id: light.changing_room_ceiling_light_level

- id: '41'    
  alias: 'Master bedroom day'
  trigger:
    - platform: state
      entity_id: input_select.time_of_day
      to: 'Day'
    - platform: state
      entity_id: input_select.home_state
      to: 'Home'
  condition:
    condition: state
    entity_id: input_select.home_state
    state: 'Home'
  action:
    - service: light.turn_off
      entity_id: light.bedside_lamp_dimmer_level
    - service: light.turn_off
      entity_id: light.bedroom_tv_backlight_level
    - service: switch.turn_off
      entity_id: switch.dressing_table_light_switch
    - service: switch.turn_on
      entity_id: switch.dressing_room_wardrobes_switch

- id: '42'    
  alias: 'Master bedroom evening'
  trigger:
    - platform: state
      entity_id: input_select.time_of_day
      to: 'Evening'
    - platform: state
      entity_id: input_select.home_state
      to: 'Home'
  condition:
    condition: state
    entity_id: input_select.home_state
    state: 'Home'
  action:
    - service: light.turn_on
      entity_id: light.bedside_lamp_dimmer_level
      data:
        brightness: 150
    - service: light.turn_on
      entity_id: light.bedroom_tv_backlight_level
      data:
        brightness: 255
        rgb_color: [255,165,0]
    - service: switch.turn_on
      entity_id: switch.dressing_table_light_switch
    - service: switch.turn_on
      entity_id: switch.dressing_room_wardrobes_switch

- id: '43'    
  alias: 'Master bedroom off'
  trigger:
    - platform: state
      entity_id: input_select.time_of_day
      to: 'Night'
    - platform: state
      entity_id: input_select.home_state
      to: 'Away'
  action:
    - service: light.turn_off
      entity_id: light.bedside_lamp_dimmer_level
    - service: light.turn_off
      entity_id: light.bedroom_tv_backlight_level
    - service: switch.turn_off
      entity_id: switch.dressing_table_light_switch
    - service: switch.turn_off
      entity_id: switch.dressing_room_wardrobes_switch
    - service: light.turn_off
      entity_id: light.changing_room_ceiling_light_level

- id: '69'    
  alias: 'Dressing room ceiling light on'
  trigger:
    - platform: state
      entity_id: binary_sensor.dressingroom_motion_sensor_sensor
      to: 'on'
  action:
    - service: light.turn_on
      entity_id: light.changing_room_ceiling_light_level

- id: '70'    
  alias: 'Dressing room ceiling light off'
  trigger:
    - platform: state
      entity_id: binary_sensor.dressingroom_motion_sensor_sensor
      to: 'off'
  action:
    - service: light.turn_off
      entity_id: light.changing_room_ceiling_light_level

- id: '35'
  alias: 'Wakeup alarm tmc'
  trigger:
    platform: template
    value_template: '{{states.sensor.time.state == "%0.02d:%0.02d" | format(states.input_datetime.alarm_time_tor.attributes.hour | int, states.input_datetime.alarm_time_tor.attributes.minute | int)}}'
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: input_select.home_state
        state: 'Home'
      - condition: state
        entity_id: input_select.sleep_state_tor
        state: 'Sleeping'
      - condition: template
        value_template: '{{(is_state("input_boolean.alarm_workday_tor", "on") and is_state("binary_sensor.workday_sensor", "on")) or is_state("input_boolean.alarm_workday_tor","off")}}'
      - condition: state
        entity_id: binary_sensor.alarm_override_tor
        state: 'off'
  action:
    - service: light.turn_on
      entity_id: light.bedside_lamp_dimmer_level
      data:
        brightness: 255
        transition: 900

- id: '12'
  alias: 'Wakeup alarm 2'
  trigger:
    platform: time
    at: '06:15:00'
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: binary_sensor.workday_sensor
        state: 'on'
      - condition: state
        entity_id: input_select.home_state
        state: 'Home'
  action:
    - service: light.turn_on
      entity_id: light.bedroom_tv_backlight_level
    - service: media_player.volume_set
      data:
        entity_id: media_player.changing_room
        volume_level: 0.35
    - service: media_player.select_source
      data:
        entity_id: media_player.changing_room
        source: 'BBC World Service News'
    - service: switch.turn_on
      entity_id: switch.dressing_table_light_switch
    - service: switch.turn_on
      entity_id: switch.dressing_room_wardrobe_switch

- id: '72'
  alias: 'Button 1 pressed once'
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      entity_id: zwave.button_1
      scene_id: 1
      scene_data: 0
  action:
    - service: notify.html5_tor_magnus_phone
      data:
        title: 'Button pressed once'
        message: 'Button pressed once'
        data:
          tag: 'this-is-a-test'

- id: '73'
  alias: 'Button 1 pressed twice'
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      entity_id: zwave.button_1
      scene_id: 1
      scene_data: 3
  action:
    - service: notify.html5_tor_magnus_phone
      data:
        title: 'Button pressed twice'
        message: 'Tor and Lande have been put to sleep'
        data:
          tag: 'this-is-a-test'
    - service: input_select.select_option
      data:
        entity_id: input_select.sleep_state_lande, input_select.sleep_state_tor
        option: 'Sleeping'

- id: '74'
  alias: 'Button 1 pressed 3 times'
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      entity_id: zwave.button_1
      scene_id: 1
      scene_data: 4
  action:
    - service: notify.html5_tor_magnus_phone
      data:
        title: 'Button pressed 3 times'
        message: 'Button pressed 3 times'
        data:
          tag: 'this-is-a-test'

- id: '75'
  alias: 'Button 1 pressed 4 times'
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      entity_id: zwave.button_1
      scene_id: 1
      scene_data: 5
  action:
    - service: notify.html5_tor_magnus_phone
      data:
        title: 'Button pressed 4 times'
        message: 'Button pressed 4 times'
        data:
          tag: 'this-is-a-test'

- id: '76'
  alias: 'Button 1 pressed 5 times'
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      entity_id: zwave.button_1
      scene_id: 1
      scene_data: 6
  action:
    - service: notify.html5_tor_magnus_phone
      data:
        title: 'Button pressed 5 times'
        message: 'Button pressed 5 times'
        data:
          tag: 'this-is-a-test'

